<boiler-sequencer sequencer-id="createDeck" dialog="true" dialog-size="large" title="Create a Deck">

  <boiler-sequencer-step next-label="Generate" on-next="vm.generatePreview()">
    <div ng-show="!vm.showInstructions">
      <a href="#" ng-click="vm.showInstructions = true" class="create-deck-instructions">Instructions</a>
      <md-input-container class="md-block" flex>
        <label>Category</label>
        <input name="category" ng-model="vm.category" type="text">
      </md-input-container>

      <md-input-container class="md-block boiler-create-card-deck-text">
        <label>Copy your deck and paste here</label>
        <textarea class="boiler-create-deck-textarea" required ng-model="vm.parseText" rows="10" md-select-on-focus boiler-tab></textarea>
      </md-input-container>
    </div>

    <div ng-show="vm.showInstructions">
      <a href="#" ng-click="vm.showInstructions = false" class="create-deck-instructions">Got it</a>
      <div class="md-headline" md-colors="{color:'accent-900'}">Take your notes using this format:</div>
      <em md-colors="{color:'background-500'}">You can use any editor, but OneNote works best. You can also type directly into the text box. Multiple tabs are ignored. Separate multiple decks by pressing enter twice.</em>
      <p md-whiteframe="1" class="create-deck-format">
          Physical Connections <span md-colors="{color:'primary-900'}">&lt;press <strong>enter</strong>&gt;</span><br /><br />
          USB 1 <span md-colors="{color:'primary-900'}">&lt;press <strong>tab</strong>&gt;</span> Low speeds of 1.5Mbps and full speeds of 12Mbps <span md-colors="{color:'primary-900'}">&lt;press <strong>enter</strong>&gt;</span><br /><br />
          USB 2 <span md-colors="{color:'primary-900'}">&lt;press <strong>tab</strong>&gt;</span> 480Mbps, maximum cable length of 5m <span md-colors="{color:'primary-900'}">&lt;press <strong>enter</strong>&gt;</span><br /><br />
          SATA 1 <span md-colors="{color:'primary-900'}">&lt;press <strong>tab</strong>&gt;</span> Maximum speeds of 1.5Gbps <span md-colors="{color:'primary-900'}">&lt;press <strong>enter</strong>&gt;</span><br /><br />
          SATA 2 <span md-colors="{color:'primary-900'}">&lt;press <strong>tab</strong>&gt;</span> Maximum speeds of 3Gbps <span md-colors="{color:'primary-900'}">&lt;press <strong>enter</strong>&gt;</span>
      </p>
    </div>

  </boiler-sequencer-step>

  <boiler-sequencer-step next-label="Looks Good" on-next="vm.save()">
    <md-content layout-padding class="boiler-create-deck-content-padding">
      <div class="blr-alert blr-alert-danger" role="alert" ng-if="vm.duplicateNames.length > 0">
        <div class="md-headline gutter-bottom"><strong><em md-colors="{color:'warn-600'}">Warning:</em></strong> The following decks will be replaced if you proceed.</div>
        <ul>
          <li ng-repeat="deck in vm.duplicateNames"><strong>{{deck}}</strong></li>
        </ul>
      </div>
    </md-content>

    <div ng-repeat="deck in vm.decks">
      <md-content layout-padding>
        <div class="md-headline gutter-bottom"><strong><em md-colors="{color:'primary-900'}">{{deck.name}}</em></strong> <small class="blr-text-muted" ng-if="deck.description"> &mdash; {{deck.description}}</small></div>
        <md-grid-list md-cols-gt-md="12" md-cols="1" md-cols-md="8" md-row-height-gt-md="1:1" md-row-height="4:3" md-gutter-gt-md="16px" md-gutter-md="8px" md-gutter="4px">
          <md-grid-tile ng-repeat="card in deck.cards" md-colspan-gt-sm="{{vm.getColSize(card.definition)}}" md-rowspan-gt-sm="{{vm.getColSize(card.definition)}}">
            <div md-whiteframe="1" class="boiler-create-deck-card">
              <md-toolbar class="boiler-create-deck-card-term">
                <div>{{card.term}}</div>
              </md-toolbar>
              <div class="boiler-create-deck-card-definition">{{card.definition}}</div>
            </div>
          </md-grid-tile>
        </md-grid-list>
      </md-content>
    </div>
  </boiler-sequencer-step>

  <boiler-sequencer-step next-label="Sweet" on-show="vm.watchSpinner()">
    <div ng-if="vm.processingDeck">
      <div layout="row" layout-align="center center" class="boiler-create-deck-spinner">
        <md-progress-circular md-mode="indeterminate"></md-progress-circular>
      </div>
    </div>

    <div ng-if="!vm.processingDeck">
      <div class="boiler-create-deck-message">
        Done and done. Check out your new deck.
      </div>
      <div class="boiler-create-deck-icon-container">
        <i class="material-icons boiler-create-deck-icon" md-colors="{color:'primary-900'}">thumb_up</i>
      </div>
    </div>
  </boiler-sequencer-step>

</boiler-sequencer>

<boiler-dialog dialog-id="errorDialog" size="medium" title="Whoops!" buttons="[{ label: 'Ok', close: true }]">
  <pane-content>
    <p><strong>Something went wrong while trying to save your cards.</strong></p>
    <md-list flex>
      <md-list-item ng-disabled="true" class="md-1-line boiler-create-deck-list-item" ng-repeat="item in vm.errors track by $index" ng-click="null">
        <div class="md-list-item-text" ng-disabled="true">
          <h3><strong>{{item.deck}}:</strong></h3>
          <p>{{item.error}}</p>
        </div>
        <md-divider class="boiler-create-deck-divider"></md-divider>
      </md-list-item>
    </md-list>
  </pane-content>
</boiler-dialog>
